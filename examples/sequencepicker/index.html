<!DOCTYPE html>
<html>
  <head>
    <title>Sequence Picker</title>
    <script defer src="http://localhost:9000/dist/widgets.umd.js"></script>
  </head>
  <body>
    <table>
      <thead>
        <tr>
          <td><b>Name</b></td>
          <td><b>Email</b></td>
          <td><b>Dog</b></td>
        </tr>
      </thead>
      <tbody>
        <!-- The table is designed to be as tall as the sequence picker dropdown, so that the
          dropdown will have space to flip upward if the window is resized. -->
        <tr>
          <td>Olof Math√©</td>
          <td>olof@example.com</td>
          <td>Pomeranian</td>
        </tr>
        <tr>
          <td>Jeff Wear</td>
          <td>jeff@example.com</td>
          <td>Golden Retriever</td>
        </tr>
        <tr>
          <td>Brad Vogel</td>
          <td>brad@example.com</td>
          <td>Chihuahua</td>
        </tr>
        <tr>
          <td>Chanpory Rith</td>
          <td>chanpory@example.com</td>
          <td>Chihuahua</td>
        </tr>
        <tr>
          <td>Jen Skene</td>
          <td>brad@example.com</td>
          <td>Saint Bernard</td>
        </tr>
        <tr>
          <td>Trey Tacon</td>
          <td>brad@example.com</td>
          <td>Golden Retriever</td>
        </tr>
        <tr>
          <td>Chuy Martinez</td>
          <td>brad@example.com</td>
          <td>Chihuahua</td>
        </tr>
        <tr>
          <td>Spencer Brown</td>
          <td>brad@example.com</td>
          <td>Jack Russell Terrier</td>
        </tr>
        <tr>
          <td>Garret Meier</td>
          <td>brad@example.com</td>
          <td>German Shepherd</td>
        </tr>
        <tr>
          <td>Logan Davis</td>
          <td>brad@example.com</td>
          <td>Shiba Inu</td>
        </tr>
        <tr>
          <td>Lo Marino</td>
          <td>lo@example.com</td>
          <td>Shiba Inu</td>
        </tr>
        <tr>
          <td>Erinn Wong</td>
          <td>brad@example.com</td>
          <td>Shiba Inu</td>
        </tr>
        <tr>
          <td>Cameron Price-Austin</td>
          <td>brad@example.com</td>
          <td>Labrador Retriever</td>
        </tr>
        <tr>
          <td>Daniel Lee</td>
          <td>brad@example.com</td>
          <td>Chihuahua</td>
        </tr>
        <tr>
          <td>Robby Allen</td>
          <td>brad@example.com</td>
          <td>Greyhound</td>
        </tr>
      </tbody>
    </table>
    <div
      class="mixmax-add-sequence-recipients-button"
      data-recipients-function="getRecipients">
    </div>
  </body>
  <script type="text/javascript">
    /* eslint browser: true */
    window.getRecipients = function(done) {
      // Simulate some latency as if we were making a network call for the recipients,
      // so that the sequence recipients table will show a loading UI.
      setTimeout(function() {
        var table = document.querySelector('table');
        var header = table.rows[0];
        var recipients = [].slice.call(table.rows, 1)
          .map(function(row) {
            return {
              email: row.cells[1].innerText,
              variables: [].reduce.call(row.cells, function(vars, cell, i) {
                vars[header.cells[i].innerText] = cell.innerText;
                return vars;
              }, {}),
              scheduledAt: false
            };
          });
        done(recipients);
      }, 5000);
    };
  </script>
</html>
